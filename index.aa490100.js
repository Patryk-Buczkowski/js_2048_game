function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.addEventListener("load",function(){var t=document.querySelector(".button.start"),o=document.querySelector("table tbody"),r=document.querySelector(".game-score"),i=document.querySelector(".message-start"),a=document.querySelector(".message-win"),n=document.querySelector(".message-lose"),s=new(function(){var t,i;function s(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s),this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.start=!1}return t=[{key:"appendOneBox",value:function(){if(this.start){if(this.occupiedPlaces().length<16){for(var e=Math.floor(Math.random()*this.board.length),t=Math.floor(Math.random()*this.board[0].length),o=this.occupiedPlaces();o.some(function(o){return o.y===e&&o.x===t});)e=Math.floor(4*Math.random()),t=Math.floor(4*Math.random());this.board[e][t]=.1>Math.random()?4:2,this.render()}16!==this.occupiedPlaces().length||this.availableMoves()||n.classList.remove("hidden")}}},{key:"availableMoves",value:function(){var e=this;return this.occupiedPlaces().some(function(t){var o=t.y,r=t.x;return e.getBoardField(o,r-1)===e.getBoardField(o,r)||e.getBoardField(o,r+1)===e.getBoardField(o,r)||e.getBoardField(o+1,r)===e.getBoardField(o,r)||e.getBoardField(o-1,r)===e.getBoardField(o,r)})}},{key:"getBoardField",value:function(e,t){return this.board[e]&&this.board[e][t]||null}},{key:"check2048",value:function(){this.board.flat().some(function(e){return 2048===e})&&a.classList.toggle("hidden")}},{key:"updateScore",value:function(e){this.score+=e,r.textContent=this.score.toString()}},{key:"occupiedPlaces",value:function(){for(var e=[],t=0;t<4;t++)for(var o=0;o<this.board[t].length;o++)0!==this.board[t][o]&&e.push({y:t,x:o});return e}},{key:"render",value:function(){for(var e=0;e<4;e++)for(var t=0;t<this.board[e].length;t++){var r=this.board[e][t];o.children[e].children[t].textContent="",o.children[e].children[t].className="field-cell",0!==r&&(o.children[e].children[t].textContent="".concat(r),o.children[e].children[t].classList.add("field-cell--".concat(r)))}}},{key:"moveRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=o;if(t<4){if(!(e>0))return this.moveRight(3,t+1);var i=this.board[t][e],a=this.board[t][e-1],n=a===i&&!r;return 0!==a&&(0===i||n)&&(this.board[t][e]=n?2*a:a,this.board[t][e-1]=0,n&&(this.updateScore(2*a),r=!0),e<3)?this.moveRight(e+1,t,r):this.moveRight(e-1,t)}this.appendOneBox(),this.occupiedPlaces(),this.check2048()}},{key:"moveLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=o;if(t<4){if(!(e<3))return this.moveLeft(0,t+1);var i=this.board[t][e],a=this.board[t][e+1],n=a===i&&!r;return 0!==a&&(0===i||n)&&(this.board[t][e]=n?2*a:a,this.board[t][e+1]=0,n&&(this.updateScore(2*a),r=!0),e>0)?this.moveLeft(e-1,t,r):this.moveLeft(e+1,t)}this.appendOneBox(),this.occupiedPlaces(),this.check2048()}},{key:"moveUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=o;if(e<4){if(!(t<3))return this.moveUp(e+1,0);var i=this.board[t][e],a=this.board[t+1][e],n=a===i&&!r;return 0!==a&&(0===i||n)&&(this.board[t][e]=n?2*a:a,this.board[t+1][e]=0,n&&(this.updateScore(2*a),r=!0),t>0)?this.moveUp(e,t-1,r):this.moveUp(e,t+1)}this.appendOneBox(),this.occupiedPlaces(),this.check2048()}},{key:"moveDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=o;if(e<4){if(!(t>0))return this.moveDown(e+1,3);var i=this.board[t][e],a=this.board[t-1][e],n=a===i&&!r;return 0!==a&&(0===i||n)&&(this.board[t][e]=n?2*a:a,this.board[t-1][e]=0,n&&(this.updateScore(2*a),r=!0),t<3)?this.moveDown(e,t+1,r):this.moveDown(e,t-1)}this.appendOneBox(),this.occupiedPlaces(),this.check2048()}}],e(s.prototype,t),i&&e(s,i),s}());document.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":s.moveLeft();break;case"ArrowRight":s.moveRight();break;case"ArrowUp":e.preventDefault(),s.moveUp();break;case"ArrowDown":e.preventDefault(),s.moveDown();break;default:throw Error("wrong button")}}),t.addEventListener("click",function(){t.classList.contains("start")&&(s.start=!0,s.appendOneBox(),s.appendOneBox()),t.classList.add("restart"),t.classList.remove("start"),i.classList.add("hidden"),"Restart"===t.textContent&&(s.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a.classList.add("hidden"),n.classList.add("hidden"),s.appendOneBox(),s.appendOneBox(),s.score=0,r.textContent="0"),t.textContent="Restart"})});
//# sourceMappingURL=index.aa490100.js.map
